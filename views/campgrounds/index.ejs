<% layout('layouts/boilerplate') %>
    <div id="cluster-map"></div>
    <div class="container mt-5 mb-5">
        <div class="row">
            <% for (let campground of campgrounds){%>
            <div class="col-sm-12 col-md-6 col-lg-4">
              <div class="card shadow mt-4">
                <%if(campground.images.length) {%>
                <a href="/campgrounds/<%= campground._id %>"><img class="card-img-top" src="<%=campground.images[0].url%>" ></a>
                <% }else {%>
                  <img class="img-fluid" alt=""
                      src="https://res.cloudinary.com/douqbebwk/image/upload/v1600103881/YelpCamp/lz8jjv2gyynjil7lswf4.png">
                  <% } %>
          
                  <div class="card-body">
                      
                      <h5 class="card-text"><%= campground.description %></h5>
                      <p class="card-text">
                          <small class="text-muted"><%= campground.location%></small>
                      </p>
                      <a class="btn btn-success" href="/campgrounds/<%=campground._id%>">View <%=campground.title%></a>
                  </div>
              </div>
            </div>
            <% }%>
          </div>
          </div>

 <script>
        const mapToken = '<%-process.env.MAPBOX_TOKEN%>';
        const campgrounds = {features:<%-JSON.stringify(campgrounds)%>}
        
</script>
    
<script src="/js/clusterMap.js"></script>